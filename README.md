# Демонстрационный проект каталога

Проект представляет собой приложение для управления каталогом музыкальных альбомов.

Возможности:
- редактирование записей в панели аминистратора
- API просмотра каталога с возможностью фильтрации записей
- загрузка каталога из JSON-файла командой управления

## Запуск демонстрации локально

Этот режим позволяет запустить проект локально в Docker-контейнере.

- переименуйте файл `.env.local` в `.env`.

- выполните команду:

```shell
docker compose up
```

В результате выполнения команды произойдет сборка проекта в Docker-образ, запуск контейнера и команд применения миграций и загрузки демонстрационного комплекта данных.

Для хранения будет использована база данных SQLite внутри контейнера.

После появления в протоколе запуска строки 
`Listening at: http://0.0.0.0:8000`
приложение должно быть доступно на локальном порту `8000`.

Автодокумментацию Swagger можно получить по адресу `http:/127.0.0.1:8000/api/v1/schema/swagger-ui/`

Создать учетную запись администратора можно командой
```shell
docker compose exec setup python manage.py createsuperuser
```

## Развертывание среды разработки

В проекте используется система управления проектом [uv](https://github.com/astral-sh/uv).

Для установки зависимостей используйте команду
```shell
uv sync
```

Приложение считывает некоторые настройки из переменных среды или из файла `.env` с помощью пакета [dotenv](https://pypi.org/project/python-dotenv/). Минимально необходимый набор настроек приведен в файле [.env.local](.env.local). Переименуйте его в `.env` для быстрого запуска.

Перед запуском необходимо подготовить базу данных, выполнив миграции
```shell
uv run manage.py migrate
```

Запуск приложения в отладочном режиме выполняется командой
```shell
uv run manage.py runserver
```

Тестовый набор данных находится в файле [albums.json](albums.json). Его можно загрузить в приложение командой
```shell
uv run manage.py import albums.json
```

## Настройки приложения

Приложение загружает следующие настройки из переменных окружения или из файла `.env`:

- DB_ENGINE - система управления базами данных
- DB_NAME - имя создаваемой базы данных
- DB_USER - имя пользователя базы данных
- DB_PASSWORD - пароль пользователя базы данных
- DJANGO_SECRET - настройка кода SECRET_KEY в Django
- ALLOWED_HOSTS - разрешенные адреса подключения к Django
- DEBUG - состояние режима отладки


Пример файла настроек находится в файле [.env.sample](.env.sample).

